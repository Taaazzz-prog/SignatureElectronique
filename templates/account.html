{% extends "base.html" %}

{% block title %}Mon Compte - Signature PDF{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/account.css') }}">
{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ğŸ‘¤ Mon compte</h1>
    <p class="subtitle">GÃ©rez votre profil et vos prÃ©fÃ©rences</p>
</div>

<!-- User Profile -->
<div class="card">
    <div class="card-title">ğŸ“§ Informations du compte</div>
    
    <div class="profile-info">
        <div class="profile-avatar">
            <div class="avatar-circle" id="avatarCircle">
                <span id="avatarInitials">U</span>
            </div>
        </div>
        
        <div class="profile-details">
            <div class="detail-row">
                <span class="detail-label">Email :</span>
                <span class="detail-value" id="userEmail">-</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Membre depuis :</span>
                <span class="detail-value" id="memberSince">-</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">DerniÃ¨re connexion :</span>
                <span class="detail-value" id="lastLogin">-</span>
            </div>
        </div>
    </div>
</div>

<!-- Statistics -->
<div class="card">
    <div class="card-title">ğŸ“Š Vos statistiques</div>
    
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">ğŸ“„</div>
            <div class="stat-value" id="totalSignedDocs">0</div>
            <div class="stat-label">Documents signÃ©s</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">âœï¸</div>
            <div class="stat-value" id="totalSignatures">0</div>
            <div class="stat-label">Signatures crÃ©Ã©es</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">ğŸ“…</div>
            <div class="stat-value" id="accountAge">0</div>
            <div class="stat-label">Jours d'utilisation</div>
        </div>
    </div>
</div>

<!-- Preferences -->
<div class="card">
    <div class="card-title">âš™ï¸ PrÃ©fÃ©rences</div>
    
    <div class="preferences-form">
        <div class="preference-item">
            <div class="preference-info">
                <div class="preference-label">ğŸŒ™ Mode sombre</div>
                <div class="preference-desc">Activer le thÃ¨me sombre pour l'interface</div>
            </div>
            <label class="switch">
                <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
                <span class="slider"></span>
            </label>
        </div>

        <div class="preference-item">
            <div class="preference-info">
                <div class="preference-label">ğŸ”” Notifications</div>
                <div class="preference-desc">Recevoir des notifications par email</div>
            </div>
            <label class="switch">
                <input type="checkbox" id="notificationsToggle" onchange="toggleNotifications()">
                <span class="slider"></span>
            </label>
        </div>

        <div class="preference-item">
            <div class="preference-info">
                <div class="preference-label">ğŸ’¾ Sauvegarder automatiquement</div>
                <div class="preference-desc">Proposer de sauvegarder chaque signature dessinÃ©e</div>
            </div>
            <label class="switch">
                <input type="checkbox" id="autoSaveToggle" onchange="toggleAutoSave()">
                <span class="slider"></span>
            </label>
        </div>

        <div class="preference-item">
            <div class="preference-info">
                <div class="preference-label">ğŸ“± Activer le mode tactile</div>
                <div class="preference-desc">Optimiser l'interface pour les Ã©crans tactiles</div>
            </div>
            <label class="switch">
                <input type="checkbox" id="touchModeToggle" onchange="toggleTouchMode()">
                <span class="slider"></span>
            </label>
        </div>
    </div>
</div>

<!-- Signature Defaults -->
<div class="card">
    <div class="card-title">âœï¸ ParamÃ¨tres de signature par dÃ©faut</div>
    
    <div class="position-grid">
        <div class="control-group">
            <label class="control-label">Position X par dÃ©faut</label>
            <input type="number" id="defaultX" class="control-input" value="400" min="0" max="550">
        </div>
        <div class="control-group">
            <label class="control-label">Position Y par dÃ©faut</label>
            <input type="number" id="defaultY" class="control-input" value="50" min="0" max="750">
        </div>
        <div class="control-group">
            <label class="control-label">Largeur par dÃ©faut</label>
            <input type="number" id="defaultWidth" class="control-input" value="150" min="50" max="300">
        </div>
        <div class="control-group">
            <label class="control-label">Page par dÃ©faut</label>
            <select id="defaultPage" class="control-input">
                <option value="0">PremiÃ¨re page</option>
                <option value="-1">DerniÃ¨re page</option>
            </select>
        </div>
    </div>

    <div style="text-align: center; margin-top: 1rem;">
        <button class="btn btn-primary" onclick="saveDefaultSettings()">
            ğŸ’¾ Sauvegarder les paramÃ¨tres
        </button>
    </div>
</div>

<!-- Danger Zone -->
<div class="card danger-zone">
    <div class="card-title">âš ï¸ Zone de danger</div>
    
    <div class="danger-actions">
        <div class="danger-item">
            <div>
                <div class="danger-label">Supprimer toutes les signatures</div>
                <div class="danger-desc">Supprime dÃ©finitivement toutes vos signatures sauvegardÃ©es</div>
            </div>
            <button class="btn btn-danger btn-small" onclick="confirmDeleteAllSignatures()">
                ğŸ—‘ï¸ Supprimer tout
            </button>
        </div>

        <div class="danger-item">
            <div>
                <div class="danger-label">Supprimer l'historique</div>
                <div class="danger-desc">Efface l'historique de tous vos documents signÃ©s</div>
            </div>
            <button class="btn btn-danger btn-small" onclick="confirmDeleteHistory()">
                ğŸ—‘ï¸ Effacer l'historique
            </button>
        </div>

        <div class="danger-item">
            <div>
                <div class="danger-label">Supprimer le compte</div>
                <div class="danger-desc">Supprime dÃ©finitivement votre compte et toutes vos donnÃ©es</div>
            </div>
            <button class="btn btn-danger btn-small" onclick="confirmDeleteAccount()">
                âš ï¸ Supprimer le compte
            </button>
        </div>
    </div>
</div>

<!-- Confirmation Modal -->
<div id="confirmModal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="confirmModalTitle">Confirmer l'action</h2>
            <button class="modal-close" onclick="closeConfirmModal()">&times;</button>
        </div>
        <div class="modal-body">
            <p id="confirmModalMessage">ÃŠtes-vous sÃ»r de vouloir effectuer cette action ?</p>
            <p style="color: var(--danger); font-size: 0.875rem; font-weight: 600;">
                Cette action est irrÃ©versible.
            </p>
        </div>
        <div class="modal-actions">
            <button class="btn btn-danger" id="confirmActionBtn">
                Confirmer
            </button>
            <button class="btn btn-secondary" onclick="closeConfirmModal()">
                Annuler
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/account.js') }}"></script>
{% endblock %}
