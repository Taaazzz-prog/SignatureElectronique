{% extends "base.html" %}

{% block title %}Mes Signatures - Signature PDF{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/signatures.css') }}">
{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ğŸ’¾ Mes signatures</h1>
    <p class="subtitle">GÃ©rez vos signatures sauvegardÃ©es</p>
</div>

<!-- Create New Signature -->
<div class="card">
    <div class="card-title">âœï¸ CrÃ©er une nouvelle signature</div>
    <p style="margin-bottom: 1rem; color: var(--text-light);">
        Dessinez votre signature ci-dessous et sauvegardez-la pour une rÃ©utilisation rapide
    </p>
    
    <canvas id="createSignatureCanvas"></canvas>
    
    <div class="canvas-controls">
        <button class="btn btn-secondary btn-small" onclick="clearCreateCanvas()">
            ğŸ—‘ï¸ Effacer
        </button>
        <button class="btn btn-secondary btn-small" onclick="undoCreateCanvas()">
            â†¶ Annuler
        </button>
    </div>

    <div id="saveSignatureForm" class="hidden" style="margin-top: 1rem;">
        <input 
            type="text" 
            id="signatureName" 
            class="control-input" 
            placeholder="Nom de la signature (ex: Signature professionnelle)"
            style="width: 100%; margin-bottom: 1rem;"
        >
        <div style="text-align: center;">
            <button class="btn btn-success" onclick="saveSignature()">
                ğŸ’¾ Sauvegarder la signature
            </button>
            <button class="btn btn-secondary" onclick="cancelSaveSignature()">
                âŒ Annuler
            </button>
        </div>
    </div>

    <div id="saveSignatureBtn" style="text-align: center; margin-top: 1rem;">
        <button class="btn btn-primary" onclick="showSaveSignatureForm()">
            ğŸ’¾ Sauvegarder cette signature
        </button>
    </div>
</div>

<!-- Saved Signatures List -->
<div class="card">
    <div class="card-title">ğŸ“‹ Signatures sauvegardÃ©es</div>
    
    <div id="noSignaturesMessage" class="empty-state">
        <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ“</div>
        <p style="color: var(--text-light);">
            Vous n'avez pas encore de signature sauvegardÃ©e.<br>
            CrÃ©ez-en une ci-dessus pour commencer !
        </p>
    </div>

    <div id="savedSignaturesList" class="signatures-grid hidden"></div>
</div>

<!-- Delete Confirmation Modal -->
<div id="deleteModal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h2>ğŸ—‘ï¸ Confirmer la suppression</h2>
            <button class="modal-close" onclick="closeDeleteModal()">&times;</button>
        </div>
        <div class="modal-body">
            <p>ÃŠtes-vous sÃ»r de vouloir supprimer cette signature ?</p>
            <p style="color: var(--text-light); font-size: 0.875rem;">Cette action est irrÃ©versible.</p>
        </div>
        <div class="modal-actions">
            <button class="btn btn-danger" id="confirmDeleteBtn">
                ğŸ—‘ï¸ Supprimer
            </button>
            <button class="btn btn-secondary" onclick="closeDeleteModal()">
                Annuler
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/signatures.js') }}"></script>
{% endblock %}
